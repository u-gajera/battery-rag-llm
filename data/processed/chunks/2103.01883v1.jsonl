{"chunk_id": "2103.01883v1_p0_c0", "doc_id": "2103.01883v1", "text": "Prognostics-Informed Battery Reconﬁguration in a Multi-Battery Small UAS Energy System Prashin Sharma Robotics Institute University of Michigan Ann Arbor, USA prashinr@umich.edu Ella Atkins Aerospace Engineering and Robotics Institute University of Michigan Ann Arbor, USA ematkins@umich.edu Abstract—Batteries have been identiﬁed as one most likely small UAS (sUAS) components to fail in ﬂight. sUAS safety will therefore be improved with redundant or backup batteries. This paper presents a prognostics-informed Markov Decision Process (MDP) model for managing multi-battery reconﬁguration for sUAS missions. Typical lithium polymer (Lipo) battery properties are experimentally characterized and used in Monte Carlo simulations to establish battery dynamics in sUAS ﬂights of varying duration. Case studies illustrate the trade off between multi-battery system increased complexity/weight and resilience to non-ideal battery performance. Index Terms—Battery Reconﬁguration, Prognostics, Markov Decision Process I. INTRODUCTION Multicopters are a popular platform for emerging low- altitude small unmanned aircraft system (sUAS) missions such as inspection, surveillance, and package delivery [1]–[3]. However, risk to an overﬂown population can be nontrivial due to uncertainty in actuator and battery performance, external disturbances, lost link, and more. In a survey conducted of 1500 companies using drones in the UK [4] the average sUAS failure rate is 10−3 per ﬂight hour. Multicopter battery and motor failures are particularly problematic because energy and thrust margins are limited. Prognostics methods provide tools for predicting failure scenarios and sending key health updates enabling updates to ensure an sUAS can safely reach its destination. This paper presents an experimentally-derived battery model for standard lithium-polymer (Lipo) multicopter batteries and uses this model in a Markov Decision Process (MDP) based battery management framework. This work assumes a multicopter sUAS carries multiple battery packs because a single pack does not offer backup should a failure (e.g., internal short, failed cell) occur. This paper offers the following contributions: • An experimentally-validated sUAS battery model is pre- sented and embedded in sUAS Monte Carlo simulations. • An MDP for sUAS battery management is proposed. • Case studies examine battery and MDP performance over a variety of different health and mission length scenarios. This research was supported in part by National Science", "page": 0, "position": 0}
{"chunk_id": "2103.01883v1_p0_c1", "doc_id": "2103.01883v1", "text": "not offer backup should a failure (e.g., internal short, failed cell) occur. This paper offers the following contributions: • An experimentally-validated sUAS battery model is pre- sented and embedded in sUAS Monte Carlo simulations. • An MDP for sUAS battery management is proposed. • Case studies examine battery and MDP performance over a variety of different health and mission length scenarios. This research was supported in part by National Science Foundation I/UCRC grant 1738714, the Center for Unmanned Aircraft Systems (C-UAS). The remainder of the paper is organized as follows. A literature review is followed by a problem statement in Section III. Section IV presents a parameter identiﬁcation process and an experimentally-derived sUAS battery model. A motor current draw model and battery management MDP are also deﬁned. Section V describes Monte Carlo simulations used to determine MDP state transition probabilities. Results and conclusions are presented in Sections VI and VII, respectively. II. LITERATURE REVIEW Prognosis algorithms are critical for sUAS safety assur- ance. In [5], the author presents a methodology for health management in an electric unmanned air vehicle (UAV). The probability of subsystems failure is quantiﬁed by combining failure mode, effects, and critical analysis using a qualitative Bayesian approach. A distributed diagnosis algorithm detects and diagnoses a failed power train subsystem and instantiates a prognoser to determine remaining useful life (RUL) of the faulty system. A model-based prognosis algorithm is proposed [6] to determine remaining ﬂight time for an electric UAV. The authors use an Extended Kalman Filter (EKF) to estimate lithium polymer battery state of charge (SoC). A polynomial function is used to estimate SoC until the low voltage threshold is reached to determine ﬂight endurance, assuming no sudden variation in SoC. In [7], the authors use an Unscented Kalman Filter (UKF) to determine battery SoC. Assuming the remain- ing ﬂight plan was known, the UKF was used to simulate the ﬂight plan energy demand into the future until an critical SoC threshold was reached. These approaches have applied model-based methods for prognostics. In [8] the authors use a data-driven strategy to determine RUL and predict battery end", "page": 0, "position": 1}
{"chunk_id": "2103.01883v1_p1_c0", "doc_id": "2103.01883v1", "text": "based Decision Making (PDM) architecture consisting of four main elements: a diagnoser (DX), decision maker (DM), vehicle simulation(VS) and the vehicle itself. The prognostics problem is formulated as a constraint satisfaction problem (CSP) and solved using backtracking search and particle ﬁltering. In this framework, mission waypoints are deﬁned a- priori; waypoints are assumed reachable even in the presence of faults. A similar prognostics architecture is proposed in [10] and implemented on an unmanned ground vehicle. In [11] the authors proposed a mission planning strategy for sUAS multicopters that incorporates battery State of Charge (SoC) and State of Health (SoH) to generate updated mission plans. The planning problem is formulated as an optimiza- tion problem to minimize total energy consumed by the multicopter, subject to nonlinear constraints deﬁned by UAV dynamics, brushless motor dynamics and battery dynamics. In reference [12] and follow-on work [13] the authors present an Automated Contingency Planner enhanced by prognostic information. Online optimization determines a minimum cost reconﬁguration for the system and components. A receding horizon planner is utilized in [14] to incorporate the constraints determined from prognostics information. Ref. [15] utilizes prognostics outputs in battery reconﬁg- uration using a constraint satisfaction algorithm. A survey of battery reconﬁguration techniques is presented in [16]. In [17], the authors present a novel method for in-ﬂight battery swap. A primary battery is consistently carried onboard a long-endurance host drone, and a smaller drone carrying a secondary battery sporadically attaches to the primary or host drone. Once docked, the host drone switches from primary to secondary battery, and once the secondary battery depletes, the smaller ”recharging” drone undocks from the host drone. In [18] the authors proposes an algorithm to optimally charge electric vehicles. Hidden Markov Models (HMMs) are obtained from ﬁtting data collected from stochastic usage patterns for a single vehicle. Dynamic programming is used to determine optimal charge policies. There is no mention of battery health in this work. Life-cycle assessment for Lipo batteries using a Markov Decision Process (MDP) is proposed in [19]. Optimal policies obtained from solving the MDP act as a condition-based decision-maker to either recycle,", "page": 1, "position": 0}
{"chunk_id": "2103.01883v1_p1_c1", "doc_id": "2103.01883v1", "text": "charge electric vehicles. Hidden Markov Models (HMMs) are obtained from ﬁtting data collected from stochastic usage patterns for a single vehicle. Dynamic programming is used to determine optimal charge policies. There is no mention of battery health in this work. Life-cycle assessment for Lipo batteries using a Markov Decision Process (MDP) is proposed in [19]. Optimal policies obtained from solving the MDP act as a condition-based decision-maker to either recycle, inspect, or reuse a battery. Our proposed method’s innovations relative to state-of-the- art are in the speciﬁcation and evaluation of a prognostics- informed MDP for battery management in multi-battery sUAS. III. PROBLEM STATEMENT Battery failures are one of the top three causes of sUAS failure. Series-parallel battery pack capacity fade and elevated impedance typically cause imbalance resulting in permanent battery pack degradation [20]. Ref. [21] recommends battery failures be mitigated by employing batteries in parallel. This paper proposes a battery reconﬁguration Markov Decision Process (MDP) for a series-parallel battery pack as shown in Figure 1. This MDP considers battery pack degradation conditions and remaining ﬂight time in recommending battery 𝑅! \",\" 𝑉$%&,' \",\" 𝑅! \",( 𝑉$%&,' \",( 𝑅! \",) 𝑉$%&,' \",) 𝑅! (,\" 𝑉$%&,' (,\" 𝑅! (,( 𝑉$%&,' (,( 𝑅! (,) 𝑉$%&,' (,) 𝑆𝑤\" 𝑆𝑤( 𝑖'( 𝑖'\" 𝑖' Fig. 1: The sUAS series-parallel battery pack system modeled in this work. use and switching decisions. The proposed battery MDP architecture is shown in Figure 2. The MDP reconﬁguration concept was ﬁrst proposed in the context of a mission planning hierarchical MDP (hMDP) in [22]. This paper presents the battery and MDP models, simulations, and case study results associated with the battery MDP component of the previously- proposed hMDP architecture. As shown in the ﬁgure, the battery MDP outputs an optimal battery usage action based on remaining ﬂight time, expected motor current draw, and each battery’s End of Discharge (EoD) time. Accurate models of battery cell and pack charge and discharge dynamics, mission execution including expected motor current draw and remaining ﬂight time, and battery health must be developed. The MDP action and state-space must be decomposed to the extent possible to", "page": 1, "position": 1}
{"chunk_id": "2103.01883v1_p2_c0", "doc_id": "2103.01883v1", "text": "IV. SYSTEM MODELLING A. Enhanced Self-Correcting Battery Model The Lipo battery can be modelled as a voltage source (Open Circuit Voltage) that has a resistance and one or more sub- circuits of resistance and capacitor in parallel with hysteresis as shown in Figure 3. This model is referred to as the Enhanced Self-Correcting System (ECS) Model. Fig. 3: Enhanced Self-Correcting System (ECS) model of a Lipo Battery. The discrete state space ECS model formulation [23] using multiple parallel resistor-capacitor pair current can be written as: ir[k + 1] =   F1 0 · · · 0 F2 ... ...   | {z } ARC ir[k] +   (1 −F1) (1 −F2) ...   | {z } BRC i[k] (1) where ir is the current through the sub-circuit of the par- allel resistor-capacitor and Fj = exp( −∆t RjCj ). Let AH[k] = exp(−| η[k]i[k]γ∆t Q |). The state-space equation for the ECS model is given by:   z[k + 1] ir[k + 1] h[k + 1]  =   1 0 0 0 ARC 0 0 0 AH[k]     z[k] ir[k] h[k]   +   −η[k]∆t Q 0 BRC 0 0 (AH[k] −1)   \u0014 i[k] sgn(i[k]) \u0015 (2) where η = charge efﬁciency, i[k] = current through the circuit, γ = a positive constant, Q = total charge capacity (ampere- secs),z[k] = State of Charge (SOC), and h[k] = dynamic hysteresis. The battery voltage output equation is given by: v[k] = OCV (z[k])+M0s[k]+Mh[k]+ X j RjiRj[k]−R0i[k] (3) where, OCV (z[k]) = Open Circuit Voltage as function of time, M, M0 = Constants, s[k] =Instantaneous hysteresis. 1) Battery Model Parameter Identiﬁcation : To use the ECS model deﬁned by equations (1), (2) and (3) parameters including the OCV vs SOC relation, γ, η, Q,Rj,R0 must be identiﬁed. The experimental setup to determine these param- eters is described in this section. For all experiments, a 3s standard sUAS Lipo battery was used. Battery Charger Fig. 4: Experimental setup to measure voltage and current during charge/discharges cycle of a 3S", "page": 2, "position": 0}
{"chunk_id": "2103.01883v1_p2_c1", "doc_id": "2103.01883v1", "text": "Model Parameter Identiﬁcation : To use the ECS model deﬁned by equations (1), (2) and (3) parameters including the OCV vs SOC relation, γ, η, Q,Rj,R0 must be identiﬁed. The experimental setup to determine these param- eters is described in this section. For all experiments, a 3s standard sUAS Lipo battery was used. Battery Charger Fig. 4: Experimental setup to measure voltage and current during charge/discharges cycle of a 3S Lipo battery. The Lipo battery parameter identiﬁcation experimental setup is shown in Figure 4. An Arduino UNO was used for data collection. Each of the cell voltages was measured by 16- bit ADC converters 1 connected to analog optoisolators 2. A load of 4Ωwas attached across the battery terminal to draw a maximum current of 3Amp (1C). Output current was sensed with a low-cost current sensor 3 during the discharged cycle. A relay was also added in series with the resistance to turn the resistive load on and off. For the battery charge cycle, a standard Lipo charger, a Venom Pro Duo 80W 4 battery balance-charger product, was used. For this experiment, voltage and current measurements over the full charge and discharge cycles of the Lipo battery were collected over time. The battery was discharged to 3.3VDC per cell per the manufacturer’s recommendation and charged using the Venom balance-charger. A sample time history of collected data is shown in Figure 5. Because the low-cost battery cells have some manufacturing variability, not all cells reached the set critical voltage limit at the same time; the cells typically differ by a few mV . Data was collected at a single room temperature with battery surface temperature variation ±2◦C. The setup can be placed in a temperature-controlled environment to obtain a relationship between parameters and temperature, but this was beyond the scope of our experiments. Our simple setup does not replace manufacturer battery testing systems but does provide an economical option for battery parameter identiﬁcation and model validation. The detailed procedure we applied for parameter identiﬁ- 1https://www.adafruit.com/product/1085 2https://www.digikey.com/en/products/detail/dfrobot/DFR0504/7682221 3https://www.sparkfun.com/datasheets/BreakoutBoards/0712.pdf 4https://www.venompower.com/venom-pro-duo-80w-x2-dual-ac-dc-7a- lipo-lihv-nimh-rc-battery-balance-charger-0685", "page": 2, "position": 1}
{"chunk_id": "2103.01883v1_p3_c0", "doc_id": "2103.01883v1", "text": "0 10 20 30 40 50 60 70 80 90 Time(min) 3.4 3.6 3.8 4 Cell Voltage (VDC) 0 10 20 30 40 50 60 70 80 90 Time(min) 0 1 2 3 Current Amps 0 10 20 30 40 50 60 70 80 90 Time(min) 22 23 24 25 Temperature Fig. 5: Time series plot of single cell battery voltage, current and surface temperature(◦C) sensed during a 1C discharge of a 3s battery pack. The blue highlighted segment of cell voltage and current is used for further analysis. Fig. 6: Battery voltage variation with State of Charge (SOC) during the charge/discharge cycle for a single cell. cation can be found in [23]. The relation between SOC and charge/discharge voltage for each of the cells can be identiﬁed, as shown in Figure 6. After obtaining the charge/discharge relation to SOC we can obtain the OCV relation to SOC. Similar to the approach taken in [24], OCV was obtained by taking an average of the charge and discharge curve. The identiﬁed parameters are tabulated in Table I. Addi- TABLE I: Identiﬁed parameters for a 3s Lipo battery. Parameter Cell1 Cell2 Cell3 R0 (mΩ) 6 5.5 5.5 R1 (mΩ) 9.9 8.8 8.7 C1 (kF) 51.5 52.5 60.5 Q (Ah) 3.0271 3.0271 3.0271 γ 300 200 300 M(10−3) 17.8 31.2 18.4 M0(10−3) 5.1 5.3 5.2 ηCharge 0.973 0.973 0.973 ηDischarge 1 1 1 tional data was collected to validate the identiﬁed model. Battery cell response to a pulsed discharge is shown in Figure 7. Error was observed on the order of mV , which we deemed acceptable for our simulations. 0 1 2 3 4 5 6 7 8 Time(s) 106 3.4 3.5 3.6 3.7 3.8 3.9 4 4.1 4.2 Cell Voltage Actual Estimate Fig. 7: Time series plot comparing model estimate and actual cell voltage measured by the battery data collector during pulse discharge. For simulations the current draw through each branch of the parallel battery pack is shown in Figure 1 and is determined by the following equations: Vk = PNP j=1 V j OCV,k Rj 0 −ik PNP j=1 1", "page": 3, "position": 0}
{"chunk_id": "2103.01883v1_p3_c1", "doc_id": "2103.01883v1", "text": "3.6 3.7 3.8 3.9 4 4.1 4.2 Cell Voltage Actual Estimate Fig. 7: Time series plot comparing model estimate and actual cell voltage measured by the battery data collector during pulse discharge. For simulations the current draw through each branch of the parallel battery pack is shown in Figure 1 and is determined by the following equations: Vk = PNP j=1 V j OCV,k Rj 0 −ik PNP j=1 1 Rj 0 (4) ij k = V j OCV,k −Vk Rj 0 (5) V j OCV,k = V j,1 OCV,k + V j,2 OCV,k + V j,3 OCV,k (6) Rj 0 = Rj,1 0 + Rj,2 0 + Rj,3 0 (7) where Vk = bus voltage, Np = number of cells in parallel, and j = branch. 2) Battery Degradation Model: Degradation effects on Lipo battery parameters experiencing different aging mech- anisms in lithium-ion cathode material are described in [25]. Battery aging results in power fade, capacity fade, and other degradation effects. Temperature effects on parameters in the ECS cell model are presented in [26] and are manifested as increased internal resistance. Service limits for sUAS batteries are deﬁned in [27] as a pack that has lost 20% of its rated capacity. Battery degradation models aim to determine which parameters and range of values to vary during simulation to estimate degraded battery performance. Degraded battery parameters are provided in Table II. This list of parameters is not exhaustive but provides a useful baseline. Our simulations assume degradation/fault information will be available for our MDP since existing Battery Management Systems can ﬂag faults [28]. TABLE II: Battery degraded health parameter values. Type Description Capacity Fade 0.8 × Q Power Fade 2 × R0 Temperature effect R0L : 1.5 × R0,if T < 50F", "page": 3, "position": 1}
{"chunk_id": "2103.01883v1_p4_c0", "doc_id": "2103.01883v1", "text": "B. Motor Current Draw Model This section described the model used to determine the current draw from sUAS brushless DC motors (BLDC). Given our hexacopter case studies, rotors are numbered from 1-6 and are located at a distance L from the sUAS center of gravity. A hexacopter’s total motor thrust magnitude T and torque magnitude τi about each body axis are related to six motor speeds as described by the following equations [29]:         ω2 1 ω2 2 ω2 3 ω2 4 ω2 5 ω2 6         =     CT CT CT CT CT CT LCT 2 −LCT 2 −LCT −LCT 2 LCT 2 LCT − √ 3lCT 2 − √ 3lCT 2 0 √ 3LCT 2 √ 3lCT 2 0 CQ −CQ CQ −CQ CQ −CQ     †    T τx τy τz    where ωi = motor angular speed, L = arm length (m), CT = thrust coefﬁcient, CQ = torque coefﬁcient, † = pseudoinverse. A dynamometer5 was used to collect data for full throttle cycle of a BLDC reference motor. Least-squares curve ﬁtting was performed to determine the current drawn by a motor for a given angular speed in our hexacopter experiments. Figure 8 shows the curve ﬁt equation. 0 200 400 600 800 1000 1200 1400 1600 1800 Motor Speed (rad/s) 0 2 4 6 8 10 12 14 16 18 Current (amp) Measured Estimate ! = 3.0282(FG×*H Fig. 8: Motor current variation as a function of motor speed (RPM). C. Battery MDP Model Formulation Battery reconﬁguration is modelled as a stationary inﬁnite- horizon Markov Decision Process [30] with the assumption that the system is fully observable. An MDP is deﬁned by tuple ⟨T, S, As, p(.|s, a), r(s, a)⟩, where T is decision epoch, S is the ﬁnite set of system states, As is allowable actions for states s ∈S, p(.|s, a) is state transition probability tensor and r(s, a) is the reward for executing action a ∈As in state s", "page": 4, "position": 0}
{"chunk_id": "2103.01883v1_p4_c1", "doc_id": "2103.01883v1", "text": "inﬁnite- horizon Markov Decision Process [30] with the assumption that the system is fully observable. An MDP is deﬁned by tuple ⟨T, S, As, p(.|s, a), r(s, a)⟩, where T is decision epoch, S is the ﬁnite set of system states, As is allowable actions for states s ∈S, p(.|s, a) is state transition probability tensor and r(s, a) is the reward for executing action a ∈As in state s ∈S. The MDP computes actions that maximize expected value for each state based on the Bellman equation. Classic algorithms such as Value Iteration or Policy Iteration can be used to determine optimal MDP policy π⋆. 1) MDP State Deﬁnition: Battery MDP states describ- ing cell voltage, mission success status, and battery switch positions are deﬁned per Table III as state vector [I, B1Sw, B1S1,2,3, B1C0,1, B2Sw, B2S1,2,3, B2C0,1] and a singleton FAILURE state. BiS1,2,3 is dependent on an 5https://www.rcbenchmark.com/pages/series-1580-thrust-stand- dynamometer TABLE III: Batttery MDP state deﬁnition. States,i-(1,2) Criteria BiS1 EOD > RFD +tsf BiS2 RFD > EOD > RFD+tsf BiS3 EOD < RFD BiC0 Cell Voltage ≥Critical Voltage Value(3.4VDC) BiC1 Cell Voltage < Critical Voltage Value BiSw Battery Switch Position ie. ON or OFF I,Motor Current IH : I > 0.2Imax, IL : I < 0.2Imax FAILURE Cell voltage ≤3.3VDC and is unusable where, EOD = End of Discharge (time), RFD = Remaining Flight Duration (time), tsf = Safety Margin (time), Imax = 105 amps inequality relation of EOD and RFD. When the battery is in BiS1,2 there is sufﬁcient energy to complete the mission. However, when the battery reaches BiS3 the battery will deplete before the mission ends. The element BiC0,1 indicates cell voltage and informs the decision-maker to take appropriate action so that the battery voltage does not reach a disabling limit. BiSw provides information on which battery of series- parallel battery pack is in use. The elements of battery MDP state are computed from the minimum (worst-case) value of any cell in each series battery pack. The Imax value for state I is determined from the maximum permissible battery current draw per manufacturer data. The special state", "page": 4, "position": 1}
{"chunk_id": "2103.01883v1_p4_c2", "doc_id": "2103.01883v1", "text": "take appropriate action so that the battery voltage does not reach a disabling limit. BiSw provides information on which battery of series- parallel battery pack is in use. The elements of battery MDP state are computed from the minimum (worst-case) value of any cell in each series battery pack. The Imax value for state I is determined from the maximum permissible battery current draw per manufacturer data. The special state FAILURE occurs when cell voltage dips below the lowest Lipo voltage limit, i.e. 3.3V DC. In low voltage conditions, electronic speed controllers (ESC) used to drive BLDC motors will shut down resulting in a loss of thrust and subsequent sUAS uncontrolled descent. Battery health state is captured in the discrete MDP state values listed in Table IV. Because we do not model battery health transition dynamics in this work we assume conditions are known or accurately measured and remain constant over each ﬂight simulation. TABLE IV: Battery health state values. Condition,i-(1,2) Criteria BiF1 Healthy battery BiF2 Medium health battery BiF3 Unhealthy battery T,Temperature TH : T > 50F, TL : T < 50F where a Medium health battery has either power or capacity fade in at least one cell and an Unhealthy Battery has power and capacity fade in at least one cells. T = ambient temperature. 2) Battery MDP Action Deﬁnitions: Battery MDP actions are deﬁned in Table V for the series-parallel battery pack shown in Figure 1. TABLE V: Battery management MDP action deﬁnitions. Actions Description UseBatt1 Sw1 is ON , Sw2 is OFF UseBatt2 Sw1 is OFF , Sw2 is ON UseBoth Sw1 is ON , Sw2 is ON", "page": 4, "position": 2}
{"chunk_id": "2103.01883v1_p5_c0", "doc_id": "2103.01883v1", "text": "𝑇! 𝑇\" 𝐵#𝐹#, 𝐵$𝐹# 𝑷𝒐𝒍𝒊𝒄𝒚, 𝝅𝟏 ∗ 𝑷𝒐𝒍𝒊𝒄𝒚, 𝝅𝟐 ∗ 𝐵#𝐹#, 𝐵$𝐹$ …𝑷𝒐𝒍𝒊𝒄𝒚, 𝝅𝒏∗ 𝐵#𝐹), 𝐵$𝐹) 𝑷𝒐𝒍𝒊𝒄𝒚, 𝝅𝟏 ∗ 𝑷𝒐𝒍𝒊𝒄𝒚, 𝝅𝟐 ∗…𝑷𝒐𝒍𝒊𝒄𝒚, 𝝅𝒏∗ 𝐵#𝐹#, 𝐵$𝐹$ 𝐵#𝐹), 𝐵$𝐹) 𝐵#𝐹#, 𝐵$𝐹# Battery Diagnostics Module Battery Diagnostics Module Ambient Temperature Fig. 9: MDP decision tree to match policy π∗with current battery health conditions. 3) Reward Deﬁnition: The reward assigned to each MDP state/action pair is deﬁned by the following equations: R(s, UseBatt1) = w1RB1S∗+ w2RB1C∗−w3RB2Sw (8) (9) R(s, UseBoth) = w1 P2 i=1 RBiS∗ 2 + w2 P2 i=1 RBiC∗ 2 − w3 \"P2 i=1 RBiSw 2 −1 # (10) RBiS∗=                0 For all conditions with BiS1 [−5, −10] Based on relative conditions of the two battery packs in BiS2 [−20, −25] Based on relative conditions of the two battery packs in BiS3 (11) RBiC∗= ( 0 For C∗= C0 −10 For C∗= C1 (12) RBiSw = ( 1 For BiSw = ON 0 For BiSw = OFF (13) R(Failure) = −30 (14) w1 + w2 + w3 = 1 (15) (16) where i = [1, 2]. Reward R(s, UseBatt2) is computed analogously to Eqn. 9 depicting R(s, UseBatt1). Reward component RBiS⋆penalizes states with lower EOD value and poor health relative to the other battery. RB1C⋆penalizes states with low voltage value, while RB1Sw penalizes a switch position action that cycles the batteries (unnecessarily). The FAILURE state it assigned the highest penalty. The different reward components are weighted with user-speciﬁed wi. 4) Policy Implementation: Each optimal policy π⋆for the MDP was determined using Value Iteration with a discount factor γ = 0.95. Policies were stored in a lookup table for different conditions and selected as shown in Figure 9. V. MONTE CARLO SIMULATION Monte Carlo (MC) simulations are used to determine the battery MDP state transition probabilities. The list of param- eters varied for MC simulations is presented in Table VI. The range for initial cell voltages and motor speeds are based on past ﬂight tests [29] conducted with a hexacopter. TABLE VI: Parameters varied for Monte Carlo simulations.", "page": 5, "position": 0}
{"chunk_id": "2103.01883v1_p5_c1", "doc_id": "2103.01883v1", "text": "for different conditions and selected as shown in Figure 9. V. MONTE CARLO SIMULATION Monte Carlo (MC) simulations are used to determine the battery MDP state transition probabilities. The list of param- eters varied for MC simulations is presented in Table VI. The range for initial cell voltages and motor speeds are based on past ﬂight tests [29] conducted with a hexacopter. TABLE VI: Parameters varied for Monte Carlo simulations. Parameter Range Action UseBatt1, UseBatt2, UseBoth Safety Margin,tsf [5,10] Initial Cell Voltage,Bi,V DC [4.05,4.12]V DC Hexacopter Velocity,V elhex [1,9]m/s Wind Speed,w [1,3]m/s Wind Direction,θ [0,π]rad WindGust‡ [Low Light, Low Moderate, Medium Light, Medium Moderate] Cell Health,BiF∗ [F1, F2, F3] ‡ = Dryden wind model [31] Data ﬂow through Monte Carlo system simulations is shown in Figure 10. The ﬁrst step is randomly assigning MC parameters from the prescribed ranges and generating a representative ﬂight plan for a package drop mission. For trajectory tracking, a Discrete Linear Quadratic Regulator (DLQR) state feedback controller is implemented with 200Hz update rate. Closed-loop control forces and torques are fed into the motor model to determine current, scaling by battery bus voltage, and any motor thrust saturation condition. Motor current draw is considered the dominant source for battery voltage drop. Hotel load i.e., current draw from an onboard computer, communication system, and sensors, is considered relatively small. Current drawn is used to determine battery EOD time. The same system diagram is used to determine state transition probabilities and simulate MDP policy execution in this work. The battery MDP policy executor responsible for battery management actions runs at 1Hz. An example of state transition probabilities obtained from 5000 MC simulations is shown in Figure 11. We assume each commanded battery switch action works with 100% reliability in this work. Further, we assume a battery switch occurs instantaneously such that there is no intermediate change in any other MDP state features, i.e. temperature, current, health, or battery state. VI. RESULTS A series of case studies were performed to determine the performance of series-parallel battery pack usage with the MDP policy benchmarked against a ﬁxed battery usage rule.", "page": 5, "position": 1}
{"chunk_id": "2103.01883v1_p6_c0", "doc_id": "2103.01883v1", "text": "Battery Monitor & Diagnostic Module 𝐸𝑂𝐷!\"#$%&'()#%%*#+, 𝑇-. 𝑉𝑒𝑙&\"/ Flight Plan Generation DLQR FC 200𝐻𝑧 Hexacopter Plant w/ Drag Motor Model 𝐻0,2,3(𝑠) Battery Pack Model, 3𝐻𝑧 Battery Reconfiguration MDP, 1𝐻𝑧 EOD Calc, 10𝐻𝑧 𝐼45%56 𝐵∗𝐶‡ 𝐵∗𝑆𝑤 𝐵∗𝐹† 𝑇 𝐵∗𝑆3 𝐵∗𝑆† 𝑉)∗, 𝑆𝑂𝐶)∗ Σ Σ 𝑤8! 𝑤\"! 𝑤-! 𝑉)0- 𝐼45%56 𝑇, 𝜏/,',9 𝑇-#%, 𝜏-#%\",$,% =𝑥 𝑥6\". 𝑢 ∗= {1,2}, †= {1,2,3}, ‡= {0,1} , 𝑯𝒔- Transfer Function for Dryden Wind Gust, 𝑬𝑶𝑫= End of Discharge Duration, 𝑻𝒔𝒇= Safety Margin, 𝑽𝒆𝒍𝒉𝒆𝒙= hexacopter velocity, 𝑫𝑳𝑸𝑹= Discrete Linear Quadratic Regulator, 𝑭𝑪- Flight Controller Fig. 10: Monte Carlo simulation system diagram. Image Paper Fig. 11: Directed graph showing battery MDP state transitions for action UseBatt1. Nodes labeled ILOFFS3C0OFFS3C0 describe states associated with Batt1 and Batt2. TABLE VII: sUAS battery case study summary. No. Flight Time(sec) Action Battery Health 1 EODBatt1 UseBoth B1F1,2,3, B2F1,2,3 2 EODBatt1 π⋆ B1F1,2,3, B2F1,2,3 3 EODBothBatt UseBoth B1F1,2,3, B2F1,2,3 4 EODBothBatt π⋆ B1F1,2,3, B2F1,2,3 reference and actual trajectory. The controller could have been tuned to provide better performance; however, noise is an important and practical element of the simulations. Force, torque and motor current time responses are plotted in Figure 13. White noise is introduced into the system so data appears noisy to emulate non-ideal real world conditions. In case study 3, three scenarios were considered based on battery health: (B1F1, B2F2), (B1F1, B2F3), (B1F3, B2F3). Fig. 12: 3-D ﬂight trajectory executed by the simulated hexa- copter. Results from scenario one i.e. (B1F1, B2F2) are presented in Figure 14. Battery current consumed is plotted in Figure 14a. A slight difference in current drawn from the two battery branches exists until 100sec into the ﬂight due to an initial difference in internal resistance. Once there is an unequal voltage drop, the current draw equalizes. The EOD for both the batteries is shown in Figure 14b.The thick black line deﬁnes remaining ﬂight time, and the vertical dashed-dotted line represents end of mission. Since both the batteries are healthy, the mission is completed successfully. Results from scenario two i.e.(B1F1, B2F3) of case study 3 are plotted in Figure 15. Due to difference in health of", "page": 6, "position": 0}
{"chunk_id": "2103.01883v1_p7_c0", "doc_id": "2103.01883v1", "text": "Fig. 13: Vehicle forces, motor thrust and current draw during a hexacopter trajectory tracking simulation. Flight Time line. In such scenarios mission success cannot be guaranteed. In scenario three i.e. i.e.(B1F3, B2F3) of case study 3, both of the batteries are in poor health due to aging. The current drawn through each branch is thus about the same as shown in Figure 16a. However, since both batteries have capacity fade, the EOD value for both batteries is below the remaining ﬂight time line throughout the mission, which implies the mission will fail. Such a situation highlights the importance of a higher-level planner that redeﬁnes the mission or executes an appropriate contingency plan when insufﬁcient battery energy remains to safely continue the original ﬂight plan. For case study 4, results from scenario (B1F2, B2F1) are plotted in Figure 17. The MDP policy switches with UseBoth →UseBatt2 occurs at ∼20sec and not to UseBatt1 due to its poor health. Preference in this case is given to utilizing a single battery instead of both batteries when both are in the BiS1 state. With this formulation, repeated battery switching can occur. The UAS was still able to complete the mission as shown in Figure 17b. A similar scenario can be set up with a single action of UseBoth. An observed beneﬁt of battery reconﬁguration is that an unused battery can rest for subsequent use as needed. VII. CONCLUSION This paper has presented an approach to sUAS battery management with an MDP. With our state-space abstraction, MDP reward tuning required substantial effort to achieve desirable behaviour. Our proposed battery reconﬁguration MDP provides beneﬁts in term of optimal battery switching. However, additional statistical analysis is required to determine the efﬁcacy of the implemented policy. As seen from baseline case studies, if both batteries have unexpectedly poor health ﬂight the original ﬂight plan can still be impossible to achieve. Battery prognostics results must therefore be shared with a ﬂight planner capable of updating the ﬂight plan in real-time to assure the sUAS lands before battery energy is fully expended. REFERENCES [1] “Learn about how wing delivery works,”", "page": 7, "position": 0}
{"chunk_id": "2103.01883v1_p7_c1", "doc_id": "2103.01883v1", "text": "to determine the efﬁcacy of the implemented policy. As seen from baseline case studies, if both batteries have unexpectedly poor health ﬂight the original ﬂight plan can still be impossible to achieve. Battery prognostics results must therefore be shared with a ﬂight planner capable of updating the ﬂight plan in real-time to assure the sUAS lands before battery energy is fully expended. REFERENCES [1] “Learn about how wing delivery works,” Wing (Accessed 2021). [Online]. Available: https://wing.com/about-delivery/ [2] “Faq,” Flytrex (Accessed 2021). [Online]. Available: https://www. ﬂytrex.com/support/faq/ [3] “How it works,” Zipline (Accessed 2021). [Online]. Available: https://ﬂyzipline.com/how-it-works/ [4] M. Osborne, J. Lantair, Z. Shaﬁq, X. Zhao, V. Robu, D. Flynn, and J. Perry, “UAS Operators Safety and Reliability Survey: Emerging Technologies towards the Certiﬁcation of Autonomous UAS,” 4th International Conference on System Reliability and Safety (ICSRS), pp. 203–212, 2019. [Online]. Available: https: //doi.org/10.1109/ICSRS48664.2019.8987692 [5] C. Kulkarni and M.Corbetta, “Health management and prognostics for electric aircraft powertrain,” AIAA Propulsion and Energy Forum, 2019. [Online]. Available: https://arc.aiaa.org/doi/abs/10.2514/6.2019-4474 [6] R.Schacht-Rodr´ıguez, J-C.Ponsart, CD.Garc´ıa-Beltr´an, and CM.Astorga- Zaragoza, “Prognosis and health management for the prediction of uav ﬂight endurance,” 10th IFAC Symposium on Fault Detection, Supervision and Safety for Technical Processes SAFEPROCESS, vol. 51, no. 24, pp. 983–990, 2018. [Online]. Available: https: //doi.org/10.1016/j.ifacol.2018.09.705 [7] E.F.Hogge, B. Bole, S. Vazquez, C. Kulkarni, T.H.Strom, B.L.Hill, K.M.Smalling, and C.C.Quach, “Veriﬁcation of prognostic algorithms to predict remaining ﬂying time for electric unmanned vehicles,” Inter- national Journal of Prognostics and Health Management, 2018. [8] N.Eleftheroglou, S. Mansouri, T.Loutas, P.Karvelis, G.Georgoulas, G.Nikolakopoulos, and D. Zarouchas, “Intelligent data-driven prognostic methodologies for the real-time remaining useful life until the end- of-discharge estimation of the lithium-polymer batteries of unmanned aerial vehicles with uncertainty quantiﬁcation,” Applied Energy, vol. 254, 2019. [Online]. Available: https://doi.org/10.1016/j.apenergy.2019. 113677 [9] E.Balaban and J.J.Alonso, “A modeling framework for prognostic de- cision making and its application to uav mission planning,” in Annual Conference of The Prognostics and Health Management Society, 2013, pp. 1–12. [10] E. Balaban, S.Narasimhan, M.Daigle, I.Roychoudhury, A.Sweet, C.Bond, and G.Gorospe, “Development of a mobile robot test platform and methods for validation of prognostics-enabled decision making algo- rithms,” International Journal of Prognostics and", "page": 7, "position": 1}
{"chunk_id": "2103.01883v1_p7_c2", "doc_id": "2103.01883v1", "text": "254, 2019. [Online]. Available: https://doi.org/10.1016/j.apenergy.2019. 113677 [9] E.Balaban and J.J.Alonso, “A modeling framework for prognostic de- cision making and its application to uav mission planning,” in Annual Conference of The Prognostics and Health Management Society, 2013, pp. 1–12. [10] E. Balaban, S.Narasimhan, M.Daigle, I.Roychoudhury, A.Sweet, C.Bond, and G.Gorospe, “Development of a mobile robot test platform and methods for validation of prognostics-enabled decision making algo- rithms,” International Journal of Prognostics and Health Management, vol. 4, no. 1, p. 87, 2013. [11] R. Schacht-Rodr´ıguez, J. C. Ponsart, C. D. Garc´ıa-Beltr´an, C. M. Astorga-Zaragoza, and D. Theilliol, “Mission planning strategy for multirotor uav based on ﬂight endurance estimation*,” in International Conference on Unmanned Aircraft Systems (ICUAS), June 2019, pp. 778–786. [Online]. Available: https://doi.org/10.1109/ICUAS.2019. 8798292 [12] L. Tang, G. J. Kacprzynski, K. Goebel, A. Saxena, B. Saha, and G. Vachtsevanos, “Prognostics-enhanced automated contingency management for advanced autonomous systems,” in International Conference on Prognostics and Health Management, 2008, pp. 1–9. [Online]. Available: https:/doi/org/10.1109/PHM.2008.4711448 [13] L. Tang, G. J. Kacprzynski, K. Goebel, and G. Vachtsevanos, “Case studies for prognostics-enhanced automated contingency management for aircraft systems,” in IEEE Aerospace Conference, March 2010, pp. 1–11. [Online]. Available: https://doi.org/10.1109/AERO.2010.5446844 [14] B. Zhang, L.Tang, J.Decastro, M.Roemer, and K. Goebel, “Autonomous vehicle battery state-of-charge prognostics enhanced mission planning,” International Journal of Prognostics and Health Management, vol. 5, no. 8, 2014. [15] T. Potteiger, W. Strayhorn, K. R. Pence, and G. Karsai, “A dependable, prognostics-incorporated, n-s modular battery reconﬁguration scheme with an application to electric aircraft,” IEEE/AIAA 36th Digital Avionics Systems Conference, pp. 1–9, 2017. [Online]. Available: https://doi.org/10.1109/DASC.2017.8102033", "page": 7, "position": 2}
{"chunk_id": "2103.01883v1_p8_c0", "doc_id": "2103.01883v1", "text": "0 100 200 300 400 500 600 700 800 Time(sec) 0 5 10 15 20 25 30 35 Current (amps) UseBoth , Condition :TH , Batt1 :F1 , Batt2 :F1 Batt1 I 1 Batt2 I 2 Total I SUM = I1 + I2 (a) Total current and current passing through each branch of a series- parallel battery pack. 0 200 400 600 800 1000 Time 0 200 400 600 800 1000 1200 EOD (sec) UseBoth , Condition :TH , Batt1 :F1 , Batt2 :F1 End of Mission EOD Remaining FlightTime EOD1 EOD2 (b) EOD variation. Fig. 14: Simulated battery data for Case Study 3 Scenario 1 where all cells of Batt1 and Batt2 are healthy (F1). 0 100 200 300 400 500 600 700 800 900 Time(sec) 0 5 10 15 20 25 30 Current (amps) UseBoth , Condition :TH , Batt1 :F1 , Batt2 :F3 Batt1 I 1 Batt2 I 2 Total I SUM = I1 + I2 (a) Total current and current passing through each branch of a series- parallel battery pack. 0 100 200 300 400 500 600 700 800 900 Time(sec) 0 200 400 600 800 1000 1200 1400 1600 1800 EOD (sec) UseBoth , Condition :TH , Batt1 :F1 , Batt2 :F3 End of Mission EOD Remaining FlightTime EOD1 EOD2 (b) EOD variation. Fig. 15: Simulated battery data for Case 3 Scenario 2 where all cells of Batt1 are healthy but cells of Batt2 encounter both capacity and power fade (i.e. F3). [16] S. Ci, N. Lin, and D. Wu, “Reconﬁgurable battery techniques and systems: A survey,” IEEE Access, vol. 4, pp. 1175–1189, 2016. [Online]. Available: https://doi.org/10.1109/ACCESS.2016.2545338 [17] K. P. Jain and M. W. Mueller, “Flying batteries: In-ﬂight battery switching to increase multirotor ﬂight time,” in IEEE International Conference on Robotics and Automation (ICRA), 2020, pp. 3510–3516. [Online]. Available: https://doi.org/10.1109/ICRA40945.2020.9197580 [18] E. Iversen, J.M.Morales, and H.Madsen, “Optimal charging of an electric vehicle using a markov decision process,” Applied Energy, vol. 123, pp. 1–12, 2014. [Online]. Available: https: //doi.org/10.1016/j.apenergy.2014.02.003 [19] S.Thein and Y.S.Chang, “Decision making model for lifecycle assessment of lithium-ion battery for electric vehicle -", "page": 8, "position": 0}
{"chunk_id": "2103.01883v1_p8_c1", "doc_id": "2103.01883v1", "text": "“Flying batteries: In-ﬂight battery switching to increase multirotor ﬂight time,” in IEEE International Conference on Robotics and Automation (ICRA), 2020, pp. 3510–3516. [Online]. Available: https://doi.org/10.1109/ICRA40945.2020.9197580 [18] E. Iversen, J.M.Morales, and H.Madsen, “Optimal charging of an electric vehicle using a markov decision process,” Applied Energy, vol. 123, pp. 1–12, 2014. [Online]. Available: https: //doi.org/10.1016/j.apenergy.2014.02.003 [19] S.Thein and Y.S.Chang, “Decision making model for lifecycle assessment of lithium-ion battery for electric vehicle - a case study for smart electric bus project in korea,” Journal of Power Sources, vol. 249, pp. 142–147, 2014. [Online]. Available: https: //doi.org/10.1016/j.jpowsour.2013.10.078 [20] C. Mikolajczak, M.Kahn, K.White, and R.T.Long, “Lithium- ion batteries hazard and use assessment,” Fire Protection Research Foundation Report, 2011. [Online]. Available: https://www.nfpa.org/News-and-Research/Data-research-and-tools/ Hazardous-Materials/Lithium-ion-batteries-hazard-and-use-assessment [21] M. Logan, J.Gundlach, and T. Vranas, “Design considerations for safer small uas,” AIAA Information Systems- AIAA Infotech @ Aerospace, 2018. [Online]. Available: https://arc.aiaa.org/doi/abs/10. 2514/6.2018-1724 [22] P.Sharma and E.M.Atkins, “Prognostics-based decision making for safe autonomous ﬂight,” Doctoral Symposium, Annual Conference of the PHM Society 2020, 2020. [23] G. Plett, Battery Management Systems, Volume I: Battery modeling. Artech House, 2015, vol. 1. [24] S. Saxena, Y. Xing, and M. Pecht, “PHM of li-ion batteries,” Prognostics and Health Management of Electronics, pp. 349–375, 2018. [Online]. Available: https://doi.org/10.1002/9781119515326.ch13 [25] M. Wohlfahrt-Mehrens, C. Vogler, and J. Garche, “Aging mechanisms of lithium cathode materials,” Journal of Power Sources, vol. 127, no. 1, pp. 58–64, 2004. [26] G. Plett, Battery Management Systems, Volume II: Equivalent Circuit Methods. Artech House, 2015, vol. 1, ch. 1. [27] ASTM-F3005-14a, “Standard speciﬁcation for batteries for use in small unmanned aircraft systems (suas),” ASTM International,West Conshohocken, PA, 2014, 2014. [Online]. Available: https://doi.org/10. 1520/F3005-14A [28] P. Weicker, A Systems Approach to Lithium-Ion Battery Management. Artech House, 2013, ch. 1. [29] P.Sharma and E.M.Atkins, “Experimental investigation of tractor and pusher hexacopter performance,” Journal of Aircraft, vol. 56, no. 5,", "page": 8, "position": 1}
{"chunk_id": "2103.01883v1_p9_c0", "doc_id": "2103.01883v1", "text": "0 100 200 300 400 500 600 700 800 Time(sec) 0 5 10 15 20 25 30 Current (amps) UseBoth , Condition :TH , Batt1 :F3 , Batt2 :F3 Batt1 I 1 Batt2 I 2 Total I SUM = I1 + I2 (a) Total current and current passing through each branch of the series- parallel battery pack. 0 100 200 300 400 500 600 700 800 900 Time(sec) 0 100 200 300 400 500 600 700 800 900 EOD (sec) UseBoth , Condition :TH , Batt1 :F3 , Batt2 :F3 End of Mission EOD Remaining FlightTime EOD1 EOD2 (b) EOD variation. Fig. 16: Simulated battery data for Case Study 3 Scenario 3 where all cells of Batt1 and all cells of Batt2 experience both capacity and power fade (i.e. F3). 0 100 200 300 400 500 600 700 Time(s) 1 2 3 Battery Number 1: Batt One 2: Reserve / Batt Two 3: Both Batt One+Two (a) MDP Policy battery switching actions for the series-parallel battery conﬁguration. 0 100 200 300 400 500 600 700 800 Time(sec) 0 100 200 300 400 500 600 700 800 900 1000 EOD (sec) UseBatt1 , Condition :TH , Batt1 :F2 , Batt2 :F1 End of Mission EOD Remaining FlightTime EOD1 EOD2 (b) EOD Variation. Fig. 17: Analysis of simulated trajectory tracking data for Case Study 4, Scenario 1 where Batt1 has one cell with capacity fade and Batt2 is healthy. pp. 1920–1934, 2019. [Online]. Available: https://doi.org/10.2514/1. C035319 [30] M.L.Putterman, Markov Decision Processes: Discrete Stochastic Dynamic Programming. John Wiley & Sons, 2005. [Online]. Available: https://doi.org/10.1002/9780470316887 [31] R. Beard and T.McLain, Small Unmanned Aircraft: Theory and Practice. Princeton University Press, 2012, ch. 4. [32] X. Gong, R. Xiong, and C. C. Mi, “Study of the characteristics of battery packs in electric vehicles with parallel-connected lithium- ion battery cells,” IEEE Applied Power Electronics Conference and Exposition, pp. 3218–3224, 2014. [Online]. Available: https: //doi.org/10.1109/APEC.2014.6803766", "page": 9, "position": 0}
